# Devman Bot

Бот в Telegram, посылающий уведомления о проверке работ на сайте dvmn.org.

## Подготовка

1. Зарегистрироваться на сайте [dvmn.org](https://dvmn.org/) для получения токена к API 
Devman.

2. Создать бота в Telegram: отправить боту `BotFather` команду `/newbot` и следовать инструкциям, в конце будет выдан токен доступа к HTTP API.

3. Узнать `chat_id` пользователя, которому будут отправляться нотификации: в Telegram отправить команду `/start` боту `userinfobot`.

## Установка

1. В директории приложения создать файл настроек `.env` с содержимым:
```#!bash
DEVMAN_TOKEN=<devman_token>
TELEGRAM_BOT_TOKEN=<telegram_bot_token>
TELEGRAM_CHAT_ID=<telegram_chat_id>
```
2. Python3 должен быть уже установлен. 
Затем используйте `pip` (или `pip3`, есть конфликт с Python2) для установки зависимостей:
```#!bash
pip install -r requirements.txt
```
## Запуск на локальной машине
```#!bash
$ python3 bot.py
```
## Деплой и запуск на Heroku
На [heroku.com](https://www.heroku.com/) нужно:
1. Создать новое приложение.
2. Связать его с репозиторием бота на GitHub.
3. Задеплоить.
4. В настройках приложения (вкладка Settings) прописать Config Vars (DEVMAN_TOKEN, TELEGRAM_BOT_TOKEN, TELEGRAM_CHAT_ID).
5. Запустить приложение на вкладке Resources.

Просматривать логи и управлять приложением на Heroku можно при помощи Heroku CLI. Нужно установить Heroku CLI на локальную машину и авторизоваться на Heroku в терминале.  
Затем в терминале можно в т.ч.:
- проверить статус приложения
```#!bash
$ heroku ps -a <название приложения на Heroku>
```  
- посмотреть логи
```#!bash
$ heroku logs --tail
```
## Результат работы
Бот будет проверять, появились ли новые проверки работ на сайте [dvmn.org](https://dvmn.org/).  
При появлении новой проверки будет присылать в Telegram сообщение об этом с указанием статуса — работа принята или её нужно доработать.  
В случае ошибки в работе бота или при получении им некорректных данных от API, в Telegram также будет отправлено сообщение. 

## Цель проекта

Код написан в образовательных целях на онлайн-курсе для веб-разработчиков [dvmn.org](https://dvmn.org/).
